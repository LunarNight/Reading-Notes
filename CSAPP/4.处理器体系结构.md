#处理器体系结构
 一个处理器支持的指令和指令的字节级编码称为它的**指令集体系结构（ISA）**。不同的处理器家族，有不同的ISA.一个程序编译成在一种机器上运行，就不能再另一种机器上运行。  
 ISA在编译器编写者和处理器设计人员之间提供了一个概念抽象层，编译器编写者只需要知道允许哪些指令，以及它们是如何编码的；而处理器设计者必须建造出执行这些指令的处理器。（好像接口哦）  
##4.1 Y86-64指令集体系结构  
###4.1.1程序员可见状态
 有15个寄存器，3个1位的条件码 ZF,SF,OF, 和 PC.  
 内存从概念上来说就是一个很大的字节数组，保存着程序和数据。Y86-64程序用虚拟地址来引用内存位置。硬件和操作系统软件联合起来将虚拟地址翻译成实际或物理地址，指明数据实际存在哪个地方。  

###4.1.3指令编码
 指令集的一个重要性质就是字节编码必须有唯一的解释。因为每条指令的第一个字节有唯一的代码和功能组合，给定这个字节，我们就可以决定所有其他附加字节的长度和含义。
 
##4.3 Y86-64的顺序实现
 各个阶段：  
 1. 取值：取值阶段从内存读取指令字节，地址为PC的值，从指令中抽取出指令指示符字节的两个四位部分，称为icode(指令代码)和ifun(指令功能).  
 2. 译码：译码阶段从寄存器文件读入最多两个操作数，得到值valA和/或valB.通常它读入指令rA和rB字段指明的寄存器，有时候是rsp.  
 3. 执行：执行阶段，算数/逻辑单元(ALU)要么执行**指令**指明的操作（根据ifun），计算内存引用的有效地址，要么增加或减少栈指针。得到的值称为valE.在此,也可能设置条件码。对传送指令来说，这个阶段会检验条件码和传送条件，条件成立就更新目标寄存器。对跳转指令来说，也会决定是否选择分支。  
 4. 访存：访存阶段可以将数据写入内存，或者从内存读出数据。读出的值为valM.  
 5. 写回：写回阶段最多可以写两个结果到寄存器文件。  
 6. 更新PC:将PC设置成下一条指令的地址。  
  

##总结
 这一章稍微讲了一些，汇编语言是如何被翻译成机器代码，相关的操作，都对应不同的数字，并且是唯一对应。比如halt对应00，nop对应10.后面还会跟着相关寄存器指示符或长数字，来组成一段指令。  
 流水线化的重要特性是提高了系统的吞吐量，但是略微增加了延迟。非流水线就类似于，去火锅店吃火锅，一个人调底料时，其他人必须等他调完，才可以调。然而加上流水线的意思是，一个人放麻酱，别人可以同时放香菜，放海鲜汁。恩，同时执行。但是会增加一些延迟，比如你放完麻酱，相放香菜，发现有人在放香菜，你只能等等了。但是同时处理的人比较多，总的来说效率提高。  
 
