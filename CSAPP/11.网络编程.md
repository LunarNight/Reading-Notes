#11 网络编程
##11.1 客户端-服务器编程模型
 每个网络应用都是基于客户端-服务器模型的.采用这个模型,一个应用是由一个服务器进程和一个或者多个客户端进程组成.服务器管理某种资源,并且通过操作这种资源来为它的客户端提供某种服务.例如,一个Web服务器管理着一组磁盘文件,它会代表客户端进行检索和执行.一个FTP服务器管理着一组磁盘文件,它会为客户端进行存储和检索.  
 客户端-服务器模型中的基本操作是事务(transaction).一个客户端-服务器事务由以下四部组成.  
 + 当一个客户端需要服务时,它向服务器发送一个**请求**,发起一个事务.例如,当web浏览器需要一个文件时,它就发送一个请求给Web服务器.  
 + 服务器**收到**请求后,解释他,并以适当的方式**操作它的资源**.例如,当Web服务器收到浏览器发出的请求后,它就读一个磁盘文件.  
 + 服务器给客户端发送一个**响应**,并等待下一个请求.例如,Web服务器将文件发送回客户端.  
 + 客户端**收到响应并处理**它.例如,当Web浏览器收到来自服务器的一页后,就在屏幕上显示此页.  
  
  
认识到**客户端和服务器时进程,而不是长提到的机器或主机**,是很重要的.一台主机可以同时运行许多不同的客户端和服务器,而且一个客户端和服务器的食物可以在同一台或是不同的主机上.无论客户端和服务器时怎样映射到主机上的,客户端-服务器模型都是相同的.  
##11.2 网络
 客户端和服务器通常运行在不同的主机上,并且通过计算机网络的硬件和软件资源来通信.  
 对主机而言,网络只是又一种I/O设备,是数据源和数据接收方.一个插到I/O总线扩展槽的适配器提供了到网络的物理接口.从网络上接收的数据从适配器经过I/O和内存总线复制到内存,通常是通过DMA传送.类似地,数据也能从内存复制到网络.  
 物理上而言,网络是一个按照地理远近组成的层次系统.最低曾是LAN(Local Area Network,局域网).最流行的局域网技术是以太网(Ethernet).  
 一个**以太网段(Ethernet segment)**包括一些电缆和一个叫做**集线器**的小盒子.以太网段经常跨越一些小的区域,例如某建筑物的一个房间或者一个楼层.每根电缆都有最大位带宽.一端连接到主机的适配器,而另一端则连接到集线器的一个**端口**上.集线器不加分辨地将从一个端口上收到的每个位复制到其他所有的端口上.因此,每台主机都能看到每个位.  
 每个以太网适配器都有一个全球唯一的48位地址,它存储在这个适配器的非易失性存储器上.一台主机可以发送一段位(称为帧)到这个网段内的其他任何主机.每个帧包括一些固定数量的头部(header)位,用来标识此帧的源和目的地址以及此帧的长度,此后紧随的就是数据位的有效载荷。每个主机适配器都能看到它，但是只有目的主机实际读取它  
 使用一些电缆和叫做网桥的小盒子，多个以太网可以连接成较大的局域网，称为桥接以太网.在一个桥接的以太网里,一些电缆连接王巧和王巧,而另外一些链接王巧和集线器.这些电缆的带宽可以是不同的.  
 王巧比集线器更充分地利用了电缆带宽.利用一种聪明的分配算法,它们随着时间自己学习哪个主机可以通过哪个端口可达,然后只有必要时,有选择地将帧从一个端口复制到另一个端口.  
 在层次的更高级别中,多个不兼容的局域网可以通过叫做路由器的特殊计算机链接起来,组成一个internet.每台路由器对于它所链接到的每个网络都有一个是适配器(端口).路由器也能连接告诉点到点电话链接,这是称为WAN(Wide-Area-Network,广域网)的网络示例.  
 互联网络至关重要的特性是,它能由采用完全不同和不兼容技术的各种局域网和广域网组成.每台主机和其他每台主机都是物理项链的,但是如何能够让某台源主机跨国所有这些不兼容的网络发送数据位到另一台目的主机呢?  
 解决办法是一层运行在每台主机和路由器上的协议软件,它消除了不同网络之间的差异.这个软件实现一种协议,这种协议控制主机和路由器如何协同工作来实现数据传输.这种协议必须提供两种基本能力:  
 + **命名机制**.不同的局域网技术有不同和不兼容的方式来为主机分配地址.互联网络协议通过定义一种一致的主机 
